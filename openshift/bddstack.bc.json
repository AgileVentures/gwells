{
    "kind": "Template",
    "apiVersion": "v1",
    "metadata": {},
    "objects": [
        {
            "kind": "ImageStream",
            "apiVersion": "v1",
            "metadata": {
                "name": "jenkins-slave-base-rhel7",
                "creationTimestamp": null,
                "labels": {
                    "build": "bddstack"
                },
                "annotations": {
                    "openshift.io/generated-by": "OpenShiftNewBuild"
                }
            },
            "spec": {
                "lookupPolicy": {
                    "local": false
                },
                "tags": [
                    {
                        "name": "latest",
                        "annotations": {
                            "openshift.io/imported-from": "registry.access.redhat.com/openshift3/jenkins-slave-base-rhel7"
                        },
                        "from": {
                            "kind": "DockerImage",
                            "name": "registry.access.redhat.com/openshift3/jenkins-slave-base-rhel7"
                        },
                        "generation": null,
                        "importPolicy": {},
                        "referencePolicy": {
                            "type": ""
                        }
                    }
                ]
            },
            "status": {
                "dockerImageRepository": ""
            }
        },
        {
            "kind": "ImageStream",
            "apiVersion": "v1",
            "metadata": {
                "name": "bddstack",
                "creationTimestamp": null,
                "labels": {
                    "build": "bddstack"
                },
                "annotations": {
                    "openshift.io/generated-by": "OpenShiftNewBuild"
                }
            },
            "spec": {
                "lookupPolicy": {
                    "local": false
                }
            },
            "status": {
                "dockerImageRepository": ""
            }
        },
        {
            "kind": "BuildConfig",
            "apiVersion": "v1",
            "metadata": {
                "name": "bddstack",
                "creationTimestamp": null,
                "labels": {
                    "build": "bddstack"
                },
                "annotations": {
                    "openshift.io/generated-by": "OpenShiftNewBuild"
                }
            },
            "spec": {
                "triggers": [
                    {
                        "type": "GitHub",
                        "github": {
                            "secret": "iGb8V82BIXzPJESe5tbn"
                        }
                    },
                    {
                        "type": "Generic",
                        "generic": {
                            "secret": "1dJrdpBhYKFEk3Ls5bTc"
                        }
                    },
                    {
                        "type": "ConfigChange"
                    },
                    {
                        "type": "ImageChange",
                        "imageChange": {}
                    }
                ],
                "source": {
                    "type": "Dockerfile",
                    "dockerfile": "# https://github.com/BCDevOps/BDDStack\nFROM registry.access.redhat.com/openshift3/jenkins-slave-base-rhel7\n\nEXPOSE 8080\n\nENV PATH=$HOME/.local/bin/:$PATH \\\n    LC_ALL=en_US.UTF-8 \\\n    LANG=en_US.UTF-8\n\nENV SUMMARY=\"Jenkins slave with chrome and firefox installed for use with functional/BDD tests that use BDDStack.\" \\\n    DESCRIPTION=\"Jenkins pipeline slave with chrome and firefox for testing application with headless browser. (aka 'BDDStack')\"\n\nLABEL summary=\"$SUMMARY\" \\\n      description=\"$DESCRIPTION\" \\\n      io.k8s.description=\"$DESCRIPTION\" \\\n      io.k8s.display-name=\"Jenkins-Pipeline-BDDStack\" \\\n      io.openshift.expose-services=\"8080:http\" \\\n      io.openshift.tags=\"builder,jenkins-jnlp-chrome,jenkins-jnlp-firefox,jenkins-jnlp\" \\\n      release=\"1\"\n\n# NOTES:\n# We need to call 2 (!) yum commands before being able to enable repositories properly\n# This is a workaround for https://bugzilla.redhat.com/show_bug.cgi?id=1479388\n# Chrome install info: https://access.redhat.com/discussions/917293\nRUN yum repolist \u003e /dev/null \u0026\u0026 \\\n    yum install -y yum-utils \u0026\u0026 \\\n    yum-config-manager --disable \\* \u0026\u003e /dev/null \u0026\u0026 \\\n    yum-config-manager --enable rhel-server-rhscl-7-rpms \u0026\u0026 \\\n    yum-config-manager --enable rhel-7-server-rpms \u0026\u0026 \\\n    yum-config-manager --enable rhel-7-server-optional-rpms \u0026\u0026 \\\n    yum-config-manager --enable rhel-7-server-fastrack-rpms \u0026\u0026 \\\n    UNINSTALL_PKGS=\"java-1.8.0-openjdk-headless.i686\" \u0026\u0026\\\n    INSTALL_PKGS=\"redhat-lsb libXScrnSaver gdk-pixbuf2 xorg-x11-server-Xvfb wget firefox\" \u0026\u0026 \\\n    yum remove -y $UNINSTALL_PKGS \u0026\u0026\\\n    yum install -y --setopt=tsflags=nodocs $INSTALL_PKGS \u0026\u0026 \\\n    rpm -V $INSTALL_PKGS \u0026\u0026 \\\n    yum clean all -y \u0026\u0026 \\\n    http://dl.google.com/linux/chrome/rpm/stable/x86_64/google-chrome-stable-70.0.3538.110-1.x86_64.rpm \u0026\u0026 \\\n    yum -y localinstall google-chrome-stable_current_x86_64.rpm \u0026\u0026 \\\n    rm google-chrome-stable*.rpm \u0026\u0026 \\\n    if [ ! -d /home/jenkins/.pki ] ; then mkdir /home/jenkins/.pki; fi \u0026\u0026 \\\n    chmod 777 /home/jenkins/.pki\n\nRUN yum info google-chrome-stable\n\nENV OPENSHIFT_JENKINS_JVM_ARCH=x86_64\n\nUSER 1001\n"
                },
                "strategy": {
                    "type": "Docker",
                    "dockerStrategy": {
                        "from": {
                            "kind": "ImageStreamTag",
                            "name": "jenkins-slave-base-rhel7:latest"
                        }
                    }
                },
                "output": {
                    "to": {
                        "kind": "ImageStreamTag",
                        "name": "bddstack:latest"
                    }
                },
                "resources": {},
                "postCommit": {},
                "nodeSelector": null
            },
            "status": {
                "lastVersion": 0
            }
        }
    ]
}
